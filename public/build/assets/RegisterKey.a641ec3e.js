import{r as f,p as w,l as x,j as k,o as K,d as S,b as t,x as _,y as b,f as c,a as d,E as M,w as y,n as C,m as B,D as I,h as $}from"./app.4af431b3.js";import{_ as N}from"./Label.e48cf0ac.js";import{_ as V}from"./Input.49090146.js";import{_ as h}from"./InputError.7650a1a5.js";import{_ as j}from"./SecondaryButton.44cd151e.js";import{_ as D}from"./Button.e9fdf279.js";import E from"./WaitForKey.7b80d1fe.js";const R=["onSubmit"],T={class:"mt-4"},q={class:"mt-4"},z={class:"flex items-center mt-5"},F=$(" Cancel "),O=$(" Submit "),P={__name:"RegisterKey",props:{errorMessage:String,name:String,form:Object},emits:["start","register","update:name"],setup(r,{emit:i}){const n=r,a=f(!1),o=f(""),p=f(null);w(()=>{o.value=n.errorMessage,n.form.reset(),p.value.focus()}),x(()=>n.errorMessage,e=>{o.value=e});const l=k(()=>a.value===!0||n.form.processing),u=()=>{a.value=!0,o.value="",i("start"),axios.post(route("webauthn.store.options")).then(e=>{e.data!==void 0?v(e.data.publicKey):I().then(()=>v(e.props.publicKey))}).catch(e=>{g(),o.value=e.response.data.errors[0]})},v=e=>{a.value===!0&&i("register",e)},g=()=>{a.value=!1,i("stop")};return(e,s)=>(K(),S("form",{onSubmit:B(u,["prevent"])},[t(h,{message:r.form.errors.register,class:"mt-2"},null,8,["message"]),_(d("div",T,[t(N,{for:"name",value:"Your name"}),t(V,{type:"text",class:"mt-1 block w-3/4",id:"name",ref_key:"nameInput",ref:p,value:r.name,onInput:s[0]||(s[0]=m=>e.$emit("update:name",m.target.value)),required:"",onKeyup:s[1]||(s[1]=M(m=>u(),["enter"]))},null,8,["value"]),t(h,{message:r.form.errors.name,class:"mt-2"},null,8,["message"])],512),[[b,!c(l)||r.form.errors.name]]),_(d("div",q,[t(E,{"error-message":o.value,form:r.form,onRetry:s[2]||(s[2]=m=>u())},null,8,["error-message","form"])],512),[[b,a.value]]),d("div",z,[t(j,{onClick:s[3]||(s[3]=m=>g())},{default:y(()=>[F]),_:1}),t(D,{class:C(["ml-2",{"opacity-25":c(l)}]),disabled:c(l)},{default:y(()=>[O]),_:1},8,["class","disabled"])])],40,R))}};export{P as default};
