import{r as f,p as w,l as x,j as K,o as k,d as S,b as t,x as _,y as b,f as c,a as d,G as M,w as y,n as C,m as B,D as I,h as $}from"./app.a5a56df7.js";import{_ as N}from"./Label.675d5d2a.js";import{_ as V}from"./Input.b311c9e4.js";import{_ as h}from"./InputError.57362b3a.js";import{_ as j}from"./SecondaryButton.bb6d8f2e.js";import{_ as D}from"./Button.c5123f22.js";import R from"./WaitForKey.6fa6b55b.js";const T=["onSubmit"],q={class:"mt-4"},z={class:"mt-4"},E={class:"flex items-center mt-5"},F=$(" Cancel "),G=$(" Submit "),Q={__name:"RegisterKey",props:{errorMessage:String,name:String,form:Object},emits:["start","register","update:name"],setup(a,{emit:i}){const n=a,r=f(!1),o=f(""),p=f(null);w(()=>{o.value=n.errorMessage,n.form.reset(),p.value.focus()}),x(()=>n.errorMessage,e=>{o.value=e});const l=K(()=>r.value===!0||n.form.processing),u=()=>{r.value=!0,o.value="",i("start"),axios.post(route("webauthn.store.options")).then(e=>{e.data!==void 0?v(e.data.publicKey):I().then(()=>v(e.props.publicKey))}).catch(e=>{g(),o.value=e.response.data.errors[0]})},v=e=>{r.value===!0&&i("register",e)},g=()=>{r.value=!1,i("stop")};return(e,s)=>(k(),S("form",{onSubmit:B(u,["prevent"])},[t(h,{message:a.form.errors.register,class:"mt-2"},null,8,["message"]),_(d("div",q,[t(N,{for:"name",value:"Key name"}),t(V,{type:"text",class:"mt-1 block w-3/4",id:"name",ref_key:"nameInput",ref:p,value:a.name,onInput:s[0]||(s[0]=m=>e.$emit("update:name",m.target.value)),required:"",onKeyup:s[1]||(s[1]=M(m=>u(),["enter"]))},null,8,["value"]),t(h,{message:a.form.errors.name,class:"mt-2"},null,8,["message"])],512),[[b,!c(l)||a.form.errors.name]]),_(d("div",z,[t(R,{"error-message":o.value,form:a.form,onRetry:s[2]||(s[2]=m=>u())},null,8,["error-message","form"])],512),[[b,r.value]]),d("div",E,[t(j,{onClick:s[3]||(s[3]=m=>g())},{default:y(()=>[F]),_:1}),t(D,{class:C(["ml-2",{"opacity-25":c(l)}]),disabled:c(l)},{default:y(()=>[G]),_:1},8,["class","disabled"])])],40,T))}};export{Q as default};
